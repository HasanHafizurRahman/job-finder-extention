(()=>{var m=(t,e)=>()=>(t&&(e=t(t=0)),e);var d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);function o(t){return Promise.resolve(a("Uploaded file: "+(t.name||"file")))}function a(t){let e=(t||"").toLowerCase(),r=u.filter(l=>e.includes(l.toLowerCase())),s=e.match(/(\d+)\s+years?/);return{rawText:t,skills:r,yearsExperience:s?parseInt(s[1],10):null,probableTitle:(e.match(/frontend|developer|engineer|full[-\s]*stack/)||[""])[0]}}var u,c=m(()=>{u=["javascript","typescript","react","next.js","redux","tailwind","html","css","node.js","express","graphql","git","jest","webpack","vite","sass","mongodb","postgresql"]});var b=d(()=>{c();var p=document.getElementById("resumeText"),i=document.getElementById("resumeFile"),g=document.getElementById("saveProfileBtn"),f=document.getElementById("scrapeTabBtn"),y=document.getElementById("getSummaryBtn"),h=document.getElementById("jobsList");g.addEventListener("click",async()=>{let t=i.files&&i.files[0],e;try{t?e=await o(t):e=a(p.value||"")}catch(r){console.error("Error parsing resume:",r),alert("Error parsing resume: "+r.message);return}chrome.runtime.sendMessage({cmd:"SAVE_PROFILE",profile:e},r=>{let s=e.skills&&e.skills.length?e.skills.join(", "):"(none detected)";alert("Profile saved. Skills: "+s+`
Years exp: `+(e.yearsExperience||"unknown"))})});f.addEventListener("click",async()=>{let[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t)return alert("No active tab detected.");try{await chrome.scripting.executeScript({target:{tabId:t.id},files:["contentScript.js"]})}catch(e){return console.error("Injection error:",e),alert(`Could not inject content script automatically. Try refreshing the page and try again.
Error: `+(e.message||e))}chrome.tabs.sendMessage(t.id,{cmd:"SCRAPE_JOBS_ON_PAGE"},e=>{if(chrome.runtime.lastError)return console.warn("sendMessage error:",chrome.runtime.lastError),alert("Content script not present on this page. Try refreshing the page or check the page domain (see manifest).");alert("Scrape requested. Found "+(e.count||0)+" items (sent to storage).")})});y.addEventListener("click",()=>{chrome.runtime.sendMessage({cmd:"GET_JOBS_SUMMARY"},t=>{let e=t&&t.jobs||[];h.innerHTML=e.length?e.slice(0,50).map(r=>`<div class="job"><strong>${n(r.title)}</strong> [${r.score}%]<br/>${n(r.company)} \u2022 ${n(r.location||"")} ${r.salary?"\u2022 "+n(r.salary):""}<br/><a href="${E(r.url)}" target="_blank">Open</a></div>`).join(""):"<i>No jobs</i>"})});function n(t){return t?t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]):""}function E(t){return t?t.replace(/"/g,"&quot;"):""}});b();})();
